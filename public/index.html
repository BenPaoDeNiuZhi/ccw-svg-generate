<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
</head>

<body>
    <h3>基于cf制作,可以根据请求参数来生成svg或其他格式的图片及文件</h1>
        <h2>使用方法:</h2>
        <ol id="container">
            <!-- <li><a href=""><img src="//a?template=" /></a></li> -->
        </ol>
        <script>
            //http://www.w3.org/2000/svg
            items = [
                {
                    text: "基础:返回一个svg图片:", src:`a?template=${(()=>{
                        const svg = document.createElement("svg")
                        svg.setAttribute('width',100)
                        svg.setAttribute('height',100)
                        svg.setAttribute('xmlns','http://www.w3.org/2000/svg')
                        const rect = document.createElement('rect')
                        rect.setAttribute('x',10)
                        rect.setAttribute('y',10)
                        rect.setAttribute('width',80)
                        rect.setAttribute('height',80)
                        rect.setAttribute('fill','blue')
                        svg.appendChild(rect)
                        return svg.outerHTML
                    })()}`.replaceAll('\n', '').replaceAll('  ',' ')
                },
                {
                    text: "可以使用%s作为占位符,根据params填充,比如根据ip返回一个svg图片:", src:`a?template=${(()=>{
                        const svg = document.createElement("svg")
                        svg.setAttribute('width',100)
                        svg.setAttribute('height',100)
                        svg.setAttribute('xmlns','http://www.w3.org/2000/svg')
                        const rect = document.createElement('rect')
                        rect.setAttribute('x',0)
                        rect.setAttribute('y',10)
                        rect.setAttribute('width',100)
                        rect.setAttribute('height',80)
                        rect.setAttribute('fill','blue')
                        const text = document.createElement('text')
                        text.setAttribute('x',50)
                        text.setAttribute('y',50)
                        text.setAttribute('fill','white')
                        text.setAttribute('font-size',7)
                        text.setAttribute('text-anchor','middle')
                        text.innerText = 'ip:%s'
                        svg.appendChild(rect)
                        svg.appendChild(text)
                        return svg.outerHTML
                    })()}&params=["ip"]`.replaceAll('\n', '').replaceAll('  ',' ')
                },
                {
                    text: "可以使用%%s作为转译符,比如这个svg图片:", src:`a?template=${(()=>{
                        const svg = document.createElement("svg")
                        svg.setAttribute('width',100)
                        svg.setAttribute('height',100)
                        svg.setAttribute('xmlns','http://www.w3.org/2000/svg')
                        const rect = document.createElement('rect')
                        rect.setAttribute('x',0)
                        rect.setAttribute('y',10)
                        rect.setAttribute('width',100)
                        rect.setAttribute('height',80)
                        rect.setAttribute('fill','blue')
                        const text = document.createElement('text')
                        text.setAttribute('x',50)
                        text.setAttribute('y',50)
                        text.setAttribute('fill','white')
                        text.setAttribute('font-size',10)
                        text.setAttribute('text-anchor','middle')
                        text.innerText = 'ip:%%s'
                        svg.appendChild(rect)
                        svg.appendChild(text)
                        return svg.outerHTML
                    })()}&params=["ip"]`.replaceAll('\n', '').replaceAll('  ',' ')
                },
                {
                    text: "返回原始ua(由于ua太长,svg默认不支持换行,所以使用foreignObject):", src:`a?template=${(()=>{
                        const svg = document.createElement("svg")
                        svg.setAttribute('width',400)
                        svg.setAttribute('height',100)
                        svg.setAttribute('xmlns','http://www.w3.org/2000/svg')
                        const rect = document.createElement('rect')
                        rect.setAttribute('x',0)
                        rect.setAttribute('y',10)
                        rect.setAttribute('width','100%')
                        rect.setAttribute('height',80)
                        rect.setAttribute('fill','blue')
                        const container = document.createElement('foreignObject')
                        container.setAttribute('x',0)
                        container.setAttribute('y',0)
						container.setAttribute('width',100%)
						container.setAttribute('xmlns',"http://www.w3.org/1999/xhtml")
                        const text = document.createElement('div')
                        text.setAttribute('color','white')
                        text.innerText = 'ua:%s'
                        container.appendChild(text)
                        svg.appendChild(rect)
                        svg.appendChild(container)
                        return svg.outerHTML
                    })()}&params=["ua"]`.replaceAll('\n', '').replaceAll('  ',' ')
                },
            ]
            const container = document.getElementById('container')
            for (let i of items) {
                const li = document.createElement('li')
                const div = document.createElement('div')
                const a = document.createElement('a')
                a.style.height = '100px'
                a.href = i.src
                a.innerHTML = i.text
                const img = document.createElement('img')
                img.src = i.src
                img.style.border = 'groove black'
                div.style.display = 'flex'
                div.style.alignItems = 'flex-start'
                div.appendChild(a)
                div.appendChild(img)
                const source = document.createElement('div')
                source.style.maxWidth = '400px'
                source.innerText = i.src
                div.appendChild(source)
                li.appendChild(div)
                container.appendChild(li)
            }
        </script>
</body>

</html>
